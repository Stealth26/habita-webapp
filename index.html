<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habita Estimator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
        }
        
        .screen {
            min-height: 100vh;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .active {
            display: flex;
        }
        
        /* First Screen */
        .landing-screen {
            background-color: #FF5A5F;
            color: white;
            text-align: center;
        }
        
        .landing-title {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 2rem;
            max-width: 90%;
        }
        
        .landing-subtitle {
            font-size: 1.2rem;
            margin-bottom: 3rem;
            max-width: 80%;
        }
        
        .cta-button {
            background-color: white;
            color: #FF5A5F;
            border: none;
            border-radius: 30px;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 80%;
            max-width: 400px;
        }
        
        .cta-button:hover {
            transform: scale(1.03);
        }
        
        /* Form Screen */
        .form-screen {
            background-color: #f9f9f9;
        }
        
        .form-header {
            background-color: #FF5A5F;
            color: white;
            padding: 20px;
            border-radius: 15px 15px 0 0;
            width: 100%;
            max-width: 500px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .form-subheader {
            color: #777;
            margin-top: 10px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1rem;
        }
        
        .form-container {
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 500px;
            overflow: hidden;
            margin-bottom: 30px;
        }
        
        .form-body {
            padding: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-select, .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            background-color: white;
        }
        
        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23777' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 15px;
        }
        
        .number-input-container {
            display: flex;
            align-items: center;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .number-button {
            background-color: #f2f2f2;
            border: none;
            width: 40px;
            height: 46px;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .number-input {
            flex: 1;
            text-align: center;
            border: none;
            padding: 12px 0;
            font-size: 1rem;
        }
        
        .number-input::-webkit-inner-spin-button,
        .number-input::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        .slider-container {
            width: 100%;
            margin-top: 10px;
        }
        
        .slider {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #FF5A5F;
            cursor: pointer;
        }
        
        .slider-value {
            text-align: center;
            font-weight: 500;
            margin-top: 10px;
        }
        
        .submit-button {
            background-color: #FF5A5F;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 15px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
        }
        
        /* Results Screen */
        .results-screen {
            padding-top: 40px;
        }
        
        .results-container {
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 500px;
            overflow: hidden;
            margin-bottom: 30px;
        }
        
        .results-header {
            padding: 20px;
            text-align: center;
            font-size: 1.3rem;
            font-weight: bold;
            line-height: 1.4;
        }
        
        .results-body {
            padding: 20px;
        }
        
        .chart-container {
            margin-top: 20px;
            margin-bottom: 30px;
        }
        
        .chart-label {
            font-weight: 500;
            margin-bottom: 5px;
        }
        
        .chart-bar-container {
            display: flex;
            align-items: flex-end;
            height: 200px;
            margin-top: 20px;
        }
        
        .chart-bar-group {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0 10px;
        }
        
        .chart-bar {
            width: 60px;
            transition: height 1s ease;
        }
        
        .chart-bar-short {
            background-color: #FF5A5F;
            border-radius: 5px 5px 0 0;
        }
        
        .chart-bar-long {
            background-color: #ddd;
            border-radius: 5px 5px 0 0;
        }
        
        .chart-bar-label {
            margin-top: 10px;
            text-align: center;
            font-size: 0.9rem;
        }
        
        .chart-bar-value {
            font-weight: bold;
            font-size: 1.1rem;
            margin-top: 5px;
        }
        
        .consultation-cta {
            text-align: center;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        /* Contact Form Screen */
        .contact-screen {
            background-color: #f9f9f9;
        }
        
        /* Thank You Screen */
        .thanks-screen {
            background-color: #f9f9f9;
            text-align: center;
        }
        
        .thanks-icon {
            font-size: 5rem;
            color: #FF5A5F;
            margin-bottom: 20px;
        }
        
        .thanks-title {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .thanks-message {
            font-size: 1.1rem;
            margin-bottom: 30px;
            max-width: 80%;
        }
        
        .form-error {
            color: #FF5A5F;
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }
        
        .emoji-icon {
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <!-- Landing Screen -->
    <div id="landing-screen" class="screen landing-screen active">
        <h1 class="landing-title">Quanto potrebbe renderti la tua casa con gli affitti brevi?</h1>
        <p class="landing-subtitle">Scoprilo in 60 secondi con Habita Estimator</p>
        <button id="start-button" class="cta-button">Inizia la simulazione</button>
    </div>
    
    <!-- Form Screen -->
    <div id="form-screen" class="screen form-screen">
        <div class="form-container">
            <div class="form-header">
                Quanto potrebbe renderti la tua casa con gli affitti brevi?
            </div>
            <div class="form-body">
                <p class="form-subheader">Completa il modulo per ottenere una stima personalizzata</p>
                
                <div class="form-group">
                    <label class="form-label"><span class="emoji-icon">üèôÔ∏è</span> Zona/Citt√†</label>
                    <select id="city" class="form-select" required>
                        <option value="" disabled selected>Seleziona una citt√†</option>
                        <option value="Milano">Milano</option>
                        <option value="Roma">Roma</option>
                        <option value="Firenze">Firenze</option>
                        <option value="Napoli">Napoli</option>
                        <option value="Torino">Torino</option>
                        <option value="Bologna">Bologna</option>
                        <option value="Venezia">Venezia</option>
                        <option value="Genova">Genova</option>
                        <option value="Monza">Monza</option>
                        <!-- Nella versione completa ci sarebbero tutti i comuni italiani -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label"><span class="emoji-icon">üè†</span> Tipo di immobile</label>
                    <select id="property-type" class="form-select" required>
                        <option value="" disabled selected>Seleziona il tipo</option>
                        <option value="Monolocale">Monolocale</option>
                        <option value="Bilocale">Bilocale</option>
                        <option value="Trilocale">Trilocale</option>
                        <option value="Quadrilocale">Quadrilocale</option>
                        <option value="Villa">Villa</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label"><span class="emoji-icon">üë•</span> Numero massimo ospiti</label>
                    <div class="number-input-container">
                        <button type="button" class="number-button" id="decrease-guests">-</button>
                        <input type="number" id="guests" class="number-input" value="2" min="1" max="16" readonly>
                        <button type="button" class="number-button" id="increase-guests">+</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label"><span class="emoji-icon">üìÖ</span> Giorni disponibili all'anno</label>
                    <input type="range" id="days" class="slider" min="30" max="365" value="180">
                    <div class="slider-value" id="days-value">180 giorni</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label"><span class="emoji-icon">üõãÔ∏è</span> Stato dell'immobile</label>
                    <select id="property-condition" class="form-select" required>
                        <option value="" disabled selected>Seleziona lo stato</option>
                        <option value="Arredato bene">Arredato bene</option>
                        <option value="Normale">Normale</option>
                        <option value="Da sistemare">Da sistemare</option>
                    </select>
                </div>
                
                <button id="calculate-button" class="submit-button">Calcola</button>
            </div>
        </div>
    </div>
    
    <!-- Results Screen -->
    <div id="results-screen" class="screen results-screen">
        <div class="results-container">
            <div class="results-header">
                <span class="emoji-icon">üìä</span> In base ai tuoi dati, il tuo immobile potrebbe generare fino a <span id="estimated-value">‚Ç¨X.XXX</span> all'anno con gli affitti brevi.
            </div>
            <div class="results-body">
                <div class="chart-container">
                    <div class="chart-label">
                        <span class="emoji-icon">üí∞</span> Guadagno stimato mensile
                    </div>
                    <div class="chart-bar-container">
                        <div class="chart-bar-group">
                            <div class="chart-bar chart-bar-long" id="chart-long-term"></div>
                            <div class="chart-bar-label">Affitto lungo termine</div>
                            <div class="chart-bar-value" id="long-term-value">‚Ç¨700/mese</div>
                        </div>
                        <div class="chart-bar-group">
                            <div class="chart-bar chart-bar-short" id="chart-short-term"></div>
                            <div class="chart-bar-label">Affitto breve termine</div>
                            <div class="chart-bar-value" id="short-term-value">‚Ç¨1.450/mese</div>
                        </div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <div class="chart-label">
                        <span class="emoji-icon">üìà</span> Guadagno stimato annuo
                    </div>
                    <div class="chart-bar-container">
                        <div class="chart-bar-group">
                            <div class="chart-bar chart-bar-long" id="chart-long-term-annual"></div>
                            <div class="chart-bar-label">Affitto lungo termine</div>
                            <div class="chart-bar-value" id="long-term-annual-value">‚Ç¨8.400/anno</div>
                        </div>
                        <div class="chart-bar-group">
                            <div class="chart-bar chart-bar-short" id="chart-short-term-annual"></div>
                            <div class="chart-bar-label">Affitto breve termine</div>
                            <div class="chart-bar-value" id="short-term-annual-value">‚Ç¨17.400/anno</div>
                        </div>
                    </div>
                </div>
                
                <div class="consultation-cta">
                    Vuoi un'analisi gratuita del tuo caso specifico?
                    <button id="consultation-button" class="cta-button" style="background-color: #FF5A5F; color: white; margin-top: 15px;">Prenota una consulenza gratuita</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Contact Form Screen -->
    <div id="contact-screen" class="screen contact-screen">
        <div class="form-container">
            <div class="form-header">
                Richiedi una consulenza gratuita
            </div>
            <div class="form-body">
                <p class="form-subheader">Inserisci i tuoi dati per essere ricontattato</p>
                
                <div class="form-group">
                    <label class="form-label"><span class="emoji-icon">üë§</span> Nome e Cognome</label>
                    <input type="text" id="name" class="form-input" required placeholder="Inserisci il tuo nome">
                    <div class="form-error" id="name-error">Per favore inserisci il tuo nome</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label"><span class="emoji-icon">üìß</span> Email</label>
                    <input type="email" id="email" class="form-input" placeholder="Inserisci la tua email">
                    <div class="form-error" id="email-error">Per favore inserisci un'email valida</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label"><span class="emoji-icon">üì±</span> Cellulare</label>
                    <input type="tel" id="phone" class="form-input" placeholder="Inserisci il tuo numero di cellulare">
                    <div class="form-error" id="phone-error">Per favore inserisci un numero di telefono valido</div>
                </div>
                
                <div class="form-error" id="contact-error">Inserisci almeno un'email o un numero di telefono</div>
                
                <button id="submit-contact" class="submit-button">Continua</button>
            </div>
        </div>
    </div>
    
    <!-- Thank You Screen -->
    <div id="thanks-screen" class="screen thanks-screen">
        <div class="thanks-icon">‚úÖ</div>
        <h1 class="thanks-title">Grazie per la tua richiesta!</h1>
        <p class="thanks-message">Ti contatteremo al pi√π presto per fornirti tutti i dettagli sulla tua consulenza gratuita.</p>
        <button id="restart-button" class="cta-button">Torna all'inizio</button>
    </div>
    
    <script>
        // DOM Elements
        const landingScreen = document.getElementById('landing-screen');
        const formScreen = document.getElementById('form-screen');
        const resultsScreen = document.getElementById('results-screen');
        const contactScreen = document.getElementById('contact-screen');
        const thanksScreen = document.getElementById('thanks-screen');
        
        const startButton = document.getElementById('start-button');
        const calculateButton = document.getElementById('calculate-button');
        const consultationButton = document.getElementById('consultation-button');
        const submitContactButton = document.getElementById('submit-contact');
        const restartButton = document.getElementById('restart-button');
        
        const decreaseGuestsButton = document.getElementById('decrease-guests');
        const increaseGuestsButton = document.getElementById('increase-guests');
        const guestsInput = document.getElementById('guests');
        
        const daysSlider = document.getElementById('days');
        const daysValue = document.getElementById('days-value');
        
        const chartLongTerm = document.getElementById('chart-long-term');
        const chartShortTerm = document.getElementById('chart-short-term');
        const chartLongTermAnnual = document.getElementById('chart-long-term-annual');
        const chartShortTermAnnual = document.getElementById('chart-short-term-annual');
        
        const longTermValue = document.getElementById('long-term-value');
        const shortTermValue = document.getElementById('short-term-value');
        const longTermAnnualValue = document.getElementById('long-term-annual-value');
        const shortTermAnnualValue = document.getElementById('short-term-annual-value');
        const estimatedValue = document.getElementById('estimated-value');
        
        // Property prices by city (simplified)
        const cityPrices = {
            'Milano': { longTerm: 900, shortTerm: 1800 },
            'Roma': { longTerm: 850, shortTerm: 1700 },
            'Firenze': { longTerm: 800, shortTerm: 1600 },
            'Napoli': { longTerm: 650, shortTerm: 1300 },
            'Torino': { longTerm: 600, shortTerm: 1200 },
            'Bologna': { longTerm: 700, shortTerm: 1400 },
            'Venezia': { longTerm: 900, shortTerm: 2000 },
            'Genova': { longTerm: 550, shortTerm: 1100 },
            'Monza': { longTerm: 700, shortTerm: 1450 }
        };
        
        // Property type multipliers
        const propertyMultipliers = {
            'Monolocale': 0.8,
            'Bilocale': 1.0,
            'Trilocale': 1.3,
            'Quadrilocale': 1.6,
            'Villa': 2.5
        };
        
        // Condition multipliers
        const conditionMultipliers = {
            'Arredato bene': 1.2,
            'Normale': 1.0,
            'Da sistemare': 0.8
        };
        
        // Navigation Functions
        function showScreen(screen) {
            // Hide all screens
            landingScreen.classList.remove('active');
            formScreen.classList.remove('active');
            resultsScreen.classList.remove('active');
            contactScreen.classList.remove('active');
            thanksScreen.classList.remove('active');
            
            // Show the requested screen
            screen.classList.add('active');
            
            // Scroll to top
            window.scrollTo(0, 0);
        }
        
        // Event Listeners
        startButton.addEventListener('click', () => {
            showScreen(formScreen);
        });
        
        calculateButton.addEventListener('click', () => {
            const city = document.getElementById('city').value;
            const propertyType = document.getElementById('property-type').value;
            const propertyCondition = document.getElementById('property-condition').value;
            
            if (!city || !propertyType || !propertyCondition) {
                alert('Per favore, completa tutti i campi prima di procedere.');
                return;
            }
            
            calculateEstimate();
            showScreen(resultsScreen);
        });
        
        consultationButton.addEventListener('click', () => {
            showScreen(contactScreen);
        });
        
        submitContactButton.addEventListener('click', () => {
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            
            // Reset errors
            document.getElementById('name-error').style.display = 'none';
            document.getElementById('email-error').style.display = 'none';
            document.getElementById('phone-error').style.display = 'none';
            document.getElementById('contact-error').style.display = 'none';
            
            let hasError = false;
            
            if (!name) {
                document.getElementById('name-error').style.display = 'block';
                hasError = true;
            }
            
            if (!email && !phone) {
                document.getElementById('contact-error').style.display = 'block';
                hasError = true;
            }
            
            if (email && !validateEmail(email)) {
                document.getElementById('email-error').style.display = 'block';
                hasError = true;
            }
            
            if (phone && !validatePhone(phone)) {
                document.getElementById('phone-error').style.display = 'block';
                hasError = true;
            }
            
            if (!hasError) {
                showScreen(thanksScreen);
            }
        });
        
        restartButton.addEventListener('click', () => {
            // Reset form
            document.getElementById('city').selectedIndex = 0;
            document.getElementById('property-type').selectedIndex = 0;
            document.getElementById('property-condition').selectedIndex = 0;
            guestsInput.value = 2;
            daysSlider.value = 180;
            daysValue.textContent = '180 giorni';
            
            // Reset contact form
            document.getElementById('name').value = '';
            document.getElementById('email').value = '';
            document.getElementById('phone').value = '';
            
            showScreen(landingScreen);
        });
        
        // Guest counter
        decreaseGuestsButton.addEventListener('click', () => {
            const currentValue = parseInt(guestsInput.value);
            if (currentValue > parseInt(guestsInput.min)) {
                guestsInput.value = currentValue - 1;
            }
        });
        
        increaseGuestsButton.addEventListener('click', () => {
            const currentValue = parseInt(guestsInput.value);
            if (currentValue < parseInt(guestsInput.max)) {
                guestsInput.value = currentValue + 1;
            }
        });
        
        // Days slider
        daysSlider.addEventListener('input', () => {
            daysValue.textContent = daysSlider.value + ' giorni';
        });
        
        // Calculate Estimate
        function calculateEstimate() {
            const city = document.getElementById('city').value;
            const propertyType = document.getElementById('property-type').value;
            const guests = parseInt(document.getElementById('guests').value);
            const days = parseInt(document.getElementById('days').value);
            const propertyCondition = document.getElementById('property-condition').value;
            
            // Base prices
            let basePrice = cityPrices[city] || cityPrices['Milano']; // Default to Milano if city not found
            
            // Apply multipliers
            const typeMultiplier = propertyMultipliers[propertyType] || 1.0;
            const conditionMultiplier = conditionMultipliers[propertyCondition] || 1.0;
            const guestsMultiplier = 1 + ((guests - 2) * 0.1); // +10% per guest over 2
            
            // Calculate prices
            const longTermMonthly = Math.round(basePrice.longTerm * typeMultiplier * conditionMultiplier);
            const shortTermMonthly = Math.round(basePrice.shortTerm * typeMultiplier * conditionMultiplier * guestsMultiplier);
            
            // Calculate annual (with availability)
            const availabilityFactor = days / 365;
            const shortTermAnnual = Math.round(shortTermMonthly * 12 * availabilityFactor);
            const longTermAnnual = longTermMonthly * 12;
            
            // Update values
            longTermValue.textContent = '‚Ç¨' + longTermMonthly + '/mese';
            shortTermValue.textContent = '‚Ç¨' + shortTermMonthly + '/mese';
            longTermAnnualValue.textContent = '‚Ç¨' + longTermAnnual + '/anno';
            shortTermAnnualValue.textContent = '‚Ç¨' + shortTermAnnual + '/anno';
            estimatedValue.textContent = '‚Ç¨' + shortTermAnnual;
            
            // Update chart heights
            const maxHeight = 160; // max height in pixels
            const maxValue = Math.max(shortTermMonthly, longTermMonthly, shortTermAnnual/12, longTermAnnual/12);
            
            chartLongTerm.style.height = (longTermMonthly / maxValue * maxHeight) + 'px';
            chartShortTerm.style.height = (shortTermMonthly / maxValue * maxHeight) + 'px';
            chartLongTermAnnual.style.height = (longTermAnnual / (maxValue * 12) * maxHeight) + 'px';
            chartShortTermAnnual.style.height = (shortTermAnnual / (maxValue * 12) * maxHeight) + 'px';
        }
        
        // Validation Functions
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }
        
        function validatePhone(phone) {
            const re = /^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/;
            return re.test(phone);
        }
    </script>
</body>
</html>
